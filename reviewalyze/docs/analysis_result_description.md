# 분석 결과 화면 Description

**화면명:** 분석 결과 (Analysis Result)  
**버전:** 1.0  
**작성일:** 2025년 12월 08일

---

## 1. 화면 개요

사용자가 앱 키워드를 검색한 후, AI가 분석한 3개 앱의 비교 결과를 종합적으로 제공하는 화면입니다. 앱 카드, 비교표, 감정분석 차트를 통해 사용자가 최적의 앱을 선택할 수 있도록 직관적인 정보를 제공합니다.

**Core Purpose:** 복잡한 앱 비교 정보를 시각적으로 명확하게 전달하여 사용자의 의사결정을 지원합니다.

---

## 2. 화면 구조

### 2.1 레이아웃 구성

```
┌─────────────────────────────────────────┐
│  Header (고정)                          │
│  - 대시보드 제목                        │
│  - 통계 카드 (총 리뷰 수, 평균 감정, 우세 감정) │
├─────────────────────────────────────────┤
│  검색 섹션                              │
│  - 앱 키워드 검색 입력창                │
├─────────────────────────────────────────┤
│  분석 결과 섹션                         │
│  ┌───────────────────────────────────┐ │
│  │  앱 카드 (3개, 그리드 배치)        │ │
│  └───────────────────────────────────┘ │
│  ┌───────────────────────────────────┐ │
│  │  앱 비교표                        │ │
│  └───────────────────────────────────┘ │
│  ┌───────────────────────────────────┐ │
│  │  감정분석 차트 (앱별)              │ │
│  │  - 전체 감정 분포 (파이 차트)     │ │
│  │  - 키워드별 감정 분석 (바 차트)   │ │
│  └───────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### 2.2 반응형 구조

- **Desktop (1024px 이상):** 
  - 앱 카드: 3열 그리드 (`lg:grid-cols-3`)
  - 비교표: 전체 너비 표시
  - 차트: 2열 그리드 (`lg:grid-cols-[1.1fr_0.9fr]`)

- **Tablet (768px ~ 1023px):**
  - 앱 카드: 2열 그리드
  - 비교표: 가로 스크롤 가능
  - 차트: 세로 배치

- **Mobile (768px 미만):**
  - 앱 카드: 1열 세로 배치
  - 비교표: 가로 스크롤 필수
  - 차트: 세로 배치, 높이 조정

---

## 3. 주요 컴포넌트 상세

### 3.1 헤더 통계 카드

**위치:** 화면 상단 우측  
**목적:** 전체 분석 결과의 핵심 지표를 한눈에 파악

**구성 요소:**

1. **총 리뷰 수 카드**
   - 아이콘: `BarChart3` (indigo-600)
   - 배경: `bg-indigo-50`
   - 표시 값: 전체 앱의 리뷰 수 합계 (천 단위 구분 표시)
   - 예시: "12,450"

2. **평균 감정 점수 카드**
   - 아이콘: `TrendingUp` (emerald-600)
   - 배경: `bg-emerald-50`
   - 표시 값: 전체 앱의 평균 감정 점수 (소수점 3자리)
   - 예시: "0.234"

3. **우세 감정 카드**
   - 아이콘: `Sparkles` (blue-600)
   - 배경: `bg-blue-50`
   - 표시 값: "긍정적" / "부정적" / "중립적"
   - 판단 기준:
     - 평균 감정 > 0.2: "긍정적"
     - 평균 감정 < -0.2: "부정적"
     - 그 외: "중립적"

**스타일:**
- 카드: `border-slate-200/80`, `bg-white/90`, `shadow-sm`
- 패딩: `p-4`
- 아이콘 컨테이너: `rounded-lg`, `p-2`

---

### 3.2 앱 카드 (AppCard)

**위치:** 분석 결과 섹션 최상단  
**목적:** 각 앱의 핵심 정보를 카드 형태로 제공

**구성 요소:**

1. **카드 헤더**
   - 앱 아이콘: 64x64px, `rounded-xl`, `shadow-sm`
   - 앱 이름: `text-xl`, `font-semibold`
   - AI 추천 점수 (있는 경우):
     - 아이콘: `Star` (fill-yellow-400)
     - 점수: `text-lg`, `font-semibold`
     - 라벨: "AI 추천 점수"
   - 감정 뱃지: 우측 상단
     - 긍정적: `default` variant (초록)
     - 부정적: `destructive` variant (빨강)
     - 중립적: `secondary` variant (회색)

2. **카드 본문**
   - **주요 특징 요약 (AI)**
     - 아이콘: `Sparkles` (indigo-500)
     - 내용: AI가 생성한 앱 특징 요약 텍스트
   
   - **리뷰 분석**
     - 아이콘: `TrendingUp` / `TrendingDown` / `Minus`
     - 내용: 감정 상태 + 점수 + 리뷰 수
     - 예시: "긍정적 (0.45) · 리뷰 1,200개"
   
   - **기능 추천** (있는 경우)
     - 아이콘: `Lightbulb` (amber-500)
     - 내용: 불릿 리스트 형태의 기능 추천 사항
   
   - **주요 특징** (키워드 그룹)
     - 뱃지 형태로 최대 6개 표시
     - 감정 라벨에 따라 색상 구분

**스타일:**
- 카드: `Card` 컴포넌트, `shadow-sm`
- 본문 간격: `space-y-5`
- 텍스트: `text-sm`, `text-slate-700`

---

### 3.3 앱 비교표 (ComparisonTable)

**위치:** 앱 카드 하단  
**목적:** 3개 앱의 핵심 정보를 표 형태로 비교

**표 구조:**

| 기능/특징 | 앱 A | 앱 B | 앱 C |
|---------|------|------|------|
| 앱 이름 | [아이콘 + 이름] | [아이콘 + 이름] | [아이콘 + 이름] |
| 주요 특징 요약 (AI) | [텍스트] | [텍스트] | [텍스트] |
| 리뷰 분석 요약 | [감정 상태] | [감정 상태] | [감정 상태] |
| 총 리뷰 수 | [숫자] | [숫자] | [숫자] |
| 평균 감정 점수 | [좋음/보통/나쁨] | [좋음/보통/나쁨] | [좋음/보통/나쁨] |
| 긍정 비율 | [%] | [%] | [%] |
| 기능 추천 | [불릿 리스트] | [불릿 리스트] | [불릿 리스트] |

**셀 타입별 표시 방식:**

1. **앱 이름 셀**
   - 앱 아이콘 (40x40px, `rounded-lg`) + 앱 이름
   - 아이콘 로드 실패 시 picsum.photos fallback

2. **텍스트 셀**
   - 일반 텍스트: `text-sm`, `text-slate-700`
   - AI 요약: 여러 줄 텍스트 가능

3. **평균 감정 점수 셀**
   - 큰 글씨: "좋음" / "보통" / "나쁨" (색상 구분)
   - 작은 글씨: 실제 점수 (예: "+0.45")
   - 색상:
     - 좋음: `text-emerald-600`
     - 나쁨: `text-rose-600`
     - 보통: `text-slate-600`

4. **기능 추천 셀**
   - 불릿 리스트 형태 (`<ul>`)
   - 각 항목: `• [추천 내용]`

5. **빈 값 처리**
   - `—` 표시 (`text-slate-400`)

**헤더:**
- 각 앱 컬럼 헤더에 앱 아이콘 (32x32px) + 앱 이름 표시
- 아이콘 로드 실패 시 fallback 이미지 사용

**스타일:**
- 테이블: `w-full`, `min-w-[600px]`
- 헤더: `bg-slate-50`, `text-slate-600`, `font-semibold`
- 셀: `px-4`, `py-3`, `text-sm`
- 호버: `hover:bg-slate-50/50`

---

### 3.4 감정분석 차트

**위치:** 비교표 하단  
**목적:** 각 앱별 상세한 감정 분석 데이터를 시각화

**구성 요소 (앱별):**

1. **앱 제목**
   - `text-xl`, `font-semibold`, `text-slate-900`

2. **전체 감정 분포 (파이 차트)**
   - 차트 타입: `PieChart` (recharts)
   - 데이터: 긍정 / 부정 / 중립 비율
   - 색상:
     - 긍정: `#10b981` (emerald)
     - 부정: `#ef4444` (red)
     - 중립: `#6b7280` (slate)
   - 레이블: 각 섹션에 비율 표시 (예: "긍정: 60%")
   - 크기: `outerRadius={120}`
   - 높이: `320px`

3. **키워드별 감정 분석 (바 차트)**
   - 차트 타입: `BarChart` (recharts)
   - 데이터: 각 키워드 그룹별 긍정/부정/중립 리뷰 수
   - X축: 키워드 그룹명 (각도 -35도)
   - Y축: 리뷰 수
   - 바 색상:
     - 긍정: `#10b981`
     - 부정: `#ef4444`
     - 중립: `#6b7280`
   - 높이: `320px`

**레이아웃:**
- Desktop: 2열 그리드 (`lg:grid-cols-[1.1fr_0.9fr]`)
- Mobile: 세로 배치

**카드 스타일:**
- `border-slate-200`, `bg-white/90`, `shadow-sm`
- 헤더: `CardTitle` + `CardDescription`
- 본문: `pt-2` (파이 차트), 기본 패딩 (바 차트)

---

## 4. 데이터 흐름

### 4.1 데이터 구조

```typescript
interface ComparisonData {
  app_name: string;
  app_icon?: string;
  ai_summary?: string;
  review_summary?: string;
  feature_recommendations?: string[];
  ai_score?: number;
  keyword_groups?: Record<string, {
    avg_sentiment: number;
    total_reviews: number;
    sentiment_label: 'positive' | 'negative' | 'neutral';
  }>;
}
```

### 4.2 계산 로직

1. **총 리뷰 수**
   - 모든 앱의 `keyword_groups`에서 `total_reviews` 합산

2. **평균 감정 점수**
   - 각 앱의 `keyword_groups`에서 `avg_sentiment` 평균 계산
   - 전체 앱의 평균 감정 점수 평균 계산

3. **우세 감정**
   - 평균 감정 점수 기준:
     - > 0.2: "긍정적"
     - < -0.2: "부정적"
     - 그 외: "중립적"

4. **긍정 비율**
   - 각 앱의 키워드 그룹별 감정 라벨 비율 계산
   - `sentiment_label === 'positive'`인 그룹의 비율 합산

5. **감정 분포 차트 데이터**
   - 각 키워드 그룹의 `sentiment_label`에 따라 리뷰 수 분배:
     - positive: 60% 긍정, 20% 중립, 20% 부정
     - negative: 60% 부정, 20% 중립, 20% 긍정
     - neutral: 50% 중립, 25% 긍정, 25% 부정

---

## 5. 인터랙션

### 5.1 이미지 로드 실패 처리

- 앱 아이콘 로드 실패 시:
  - `onError` 핸들러로 picsum.photos fallback 이미지 사용
  - 시드 값: 앱 이름 기반

### 5.2 반응형 동작

- **모바일:**
  - 비교표: 가로 스크롤 필수 (`overflow-x-auto`)
  - 차트: 높이 조정 가능
  - 앱 카드: 세로 배치

- **데스크탑:**
  - 비교표: 전체 너비 표시
  - 차트: 2열 그리드 유지

---

## 6. 접근성 (Accessibility)

- 이미지에 `alt` 속성 제공 (앱 이름)
- 테이블 헤더 명확히 구분
- 색상 외에도 텍스트로 정보 전달 (평균 감정 점수)
- 키보드 네비게이션 지원 (테이블)

---

## 7. 성능 고려사항

- 차트 렌더링: `ResponsiveContainer` 사용으로 반응형 대응
- 이미지 최적화: 필요 시 lazy loading 고려
- 데이터 계산: 메모이제이션 고려 가능

---

## 8. 향후 개선 사항

- 비교표 정렬 기능 (컬럼 클릭 시 정렬)
- 차트 확대/축소 기능
- 앱 카드 클릭 시 상세 모달 표시
- 필터링 기능 (감정 상태별 필터)
- 공유 기능 (결과 URL 생성)
